\documentclass[a4paper,12pt]{article}

\usepackage[hidelinks]{hyperref}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{shorttoc}
\usepackage{cmap}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english, russian]{babel}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{float}
\graphicspath{{./img/}}

\definecolor{linkcolor}{HTML}{000000}
\definecolor{urlcolor}{HTML}{0085FF}
\hypersetup{pdfstartview=FitH,  linkcolor=linkcolor,urlcolor=urlcolor, colorlinks=true}

\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}

\renewcommand*\contentsname{Содержание}

\newcommand{\plot}[3]{
    \begin{figure}[H]
        \begin{center}
            \includegraphics[scale=0.6]{#1}
            \caption{#2}
            \label{#3}
        \end{center}
    \end{figure}
}

\begin{document}
    \include{title}
    \newpage

    \tableofcontents
    \newpage

    \section{Постановка задачи}\label{sec:-}
    \quad Требуется выполнить реализацию протокола маршрутизации OSPF (Open Shortest Path First) и осуществить проверку его функционирования в различных конфигурациях сетевых топологий, включая линейную, кольцевую и звездообразную.

    \section{Теория}\label{sec:}
    OSPF (Open Shortest Path First) — это протокол динамической маршрутизации, работающий на основе мониторинга состояния связей и применяющий алгоритм Дейкстры для определения наиболее коротких маршрутов.

    Основные принципы работы протокола:
    \begin{itemize}
        \item Сначала маршрутизаторы, после их активации, ищут соседние устройства, непосредственно подключенные к ним, и налаживают с ними взаимодействие.
        \item Затем маршрутизаторы обмениваются сведениями о сетях, к которым они имеют доступ, создавая общую карту (топологию) сети. Эта карта является одинаковой для всех устройств в сети.
        \item На последнем этапе активируется алгоритм SPF (Shortest Path First), целью которого является вычисление наилучшего маршрута до каждой из сетей. Этот процесс можно сравнить с построением дерева, где маршрутизатор является корнем, а маршруты к различным сетям - ветвями.
    \end{itemize}

    \section{Реализация}\label{sec:2}
    \quad Весь код написан на языке Python (версии 3.9).
    Для каждого протокола получатель и отправитель работают параллельно в отдельных потоках.
    \href{https://github.com/gobdr/Networks/tree/master/2_lab}{Ссылка на GitHub с исходным кодом}.

    \section{Результаты}\label{sec:3}
    Изначально проанализируем работу протокола в сетевой структуре с линейной топологией. Обратим внимание на размещение узлов внутри такой сети.
    \plot{full_line_points}{Расположение узлов сети с линейной топологией}{p:fullLinePoints}


    Построим граф сети и установим радиус соединения равным $ r = 1.5 $.
    \plot{full_line}{Граф сети с линейной топологией}{p:fullLine}

    Найдём кратчайшие пути между всеми парами узлов сети.
    Приведём некоторые примеры (полный список результатов можно найти в файле \textsl{2\_lab/results/line\_full.txt}).
    \begin{itemize}
        \item Начальный узел $ 0 $
        \begin{itemize}
            \item путь 0 -> 1: [0, 1]
            \item путь 0 -> 2: [0, 1, 2]
            \item путь 0 -> 3: [0, 1, 2, 3]
            \item путь 0 -> 4: [0, 1, 2, 3, 4]
            \item путь 0 -> 5: [0, 1, 2, 3, 4, 5]
        \end{itemize} 
        \item Начальный узел $ 4 $
        \begin{itemize}
            \item путь 4 -> 0: [4, 3, 2, 1, 0]
            \item путь 4 -> 1: [4, 3, 2, 1]
            \item путь 4 -> 2: [4, 3, 2]
            \item путь 4 -> 3: [4, 3]
            \item путь 4 -> 5: [4, 5]
        \end{itemize} 
    \end{itemize}
    Теперь исключим узел $ 3 $ из сети, переместив его на значительное расстояние, и затем перерисуем граф сети с учётом этого изменения.

    \plot{rm_line}{Граф сети с линейной топологией без $ 3 $ узла}{p:rmLine}

    Укажем кратчайшие пути для тех же пар узлов, что и ранее (полный список результатов можно найти в файле \textsl{2\_lab/results/line\_remove.txt}).
    \begin{itemize}
        \item Начальный узел $ 0 $
        \begin{itemize}
            \item путь 0 -> 1: [0, 1]
            \item путь 0 -> 2: [0, 1, 2]
            \item путь 0 -> 3: []
            \item путь 0 -> 4: []
            \item путь 0 -> 5: []
        \end{itemize} 
        \item Начальный узел $ 4 $
        \begin{itemize}
            \item путь 4 -> 0: []
            \item путь 4 -> 1: []
            \item путь 4 -> 2: []
            \item путь 4 -> 3: []
            \item путь 4 -> 5: [4, 5]
        \end{itemize} 
    \end{itemize}

    Проведём аналогичную процедуру для сети с кольцевидной топологией.
    \plot{full_ring_points}{Расположение узлов сети с кольцевидной топологией}{p:fullRingPoints}

    Граф, построенный с радиусом соединения $ r = 1.7 $, сети имеет вид.
    \plot{full_ring}{Граф сети с кольцевидной топологией}{p:fullRing}

    Примеры кратчайших путей (подробнее \textsl{2\_lab/results/ring\_full.txt})
    \begin{itemize}
        \item Начальный узел $ 5 $
        \begin{itemize}
            \item путь 5 -> 0: [5, 3, 1, 0]
            \item путь 5 -> 1: [5, 3, 1]
            \item путь 5 -> 2: [5, 3, 1, 0, 2]
            \item путь 5 -> 3: [5, 3]
            \item путь 5 -> 4: [5, 3, 1, 0, 2, 4]
            \item путь 5 -> 6: [5, 3, 1, 0, 2, 4, 6]
            \item путь 5 -> 7: [5, 7]
            \item путь 5 -> 8: [5, 3, 1, 0, 2, 4, 6, 8]
            \item путь 5 -> 9: [5, 7, 14, 12, 10, 9]
            \item путь 5 -> 10: [5, 7, 14, 12, 10]
            \item путь 5 -> 11: [5, 7, 14, 12, 10, 9, 11]
            \item путь 5 -> 12: [5, 7, 14, 12]
            \item путь 5 -> 13: [5, 7, 14, 12, 10, 9, 11, 13]
            \item путь 5 -> 14: [5, 7, 14]
            \item путь 5 -> 15: [5, 7, 14, 12, 10, 9, 11, 13, 15]
        \end{itemize}
        \item Начальный узел $ 12 $
        \begin{itemize}
            \item путь 12 -> 0: [12, 14, 7, 5, 3, 1, 0]
            \item путь 12 -> 1: [12, 14, 7, 5, 3, 1]
            \item путь 12 -> 2: [12, 14, 7, 5, 3, 1, 0, 2]
            \item путь 12 -> 3: [12, 14, 7, 5, 3]
            \item путь 12 -> 4: [12, 14, 7, 5, 3, 1, 0, 2, 4]
            \item путь 12 -> 5: [12, 14, 7, 5]
            \item путь 12 -> 6: [12, 10, 9, 11, 13, 15, 8, 6]
            \item путь 12 -> 7: [12, 14, 7]
            \item путь 12 -> 8: [12, 10, 9, 11, 13, 15, 8]
            \item путь 12 -> 9: [12, 10, 9]
            \item путь 12 -> 10: [12, 10]
            \item путь 12 -> 11: [12, 10, 9, 11]
            \item путь 12 -> 13: [12, 10, 9, 11, 13]
            \item путь 12 -> 14: [12, 14]
            \item путь 12 -> 15: [12, 10, 9, 11, 13, 15]
        \end{itemize}
    \end{itemize}

    После удаления узла $ 11 $ граф сети имеет вид.
    \plot{rm_ring}{Граф сети с кольцевидной топологией без $ 11 $ узла}{p:rmRing}

    Примеры путей для тех же пар узлов (подробнее \textsl{2\_lab/results/ring\_remove.txt})
    \begin{itemize}
        \item Начальный узел $ 5 $
        \begin{itemize}
            \item путь 5 -> 0: [5, 3, 1, 0]
            \item путь 5 -> 1: [5, 3, 1]
            \item путь 5 -> 2: [5, 3, 1, 0, 2]
            \item путь 5 -> 3: [5, 3]
            \item путь 5 -> 4: [5, 3, 1, 0, 2, 4]
            \item путь 5 -> 6: [5, 3, 1, 0, 2, 4, 6]
            \item путь 5 -> 7: [5, 7]
            \item путь 5 -> 8: [5, 3, 1, 0, 2, 4, 6, 8]
            \item путь 5 -> 9: [5, 7, 14, 12, 10, 9]
            \item путь 5 -> 10: [5, 7, 14, 12, 10]
            \item путь 5 -> 11: []
            \item путь 5 -> 12: [5, 7, 14, 12]
            \item путь 5 -> 13: [5, 3, 1, 0, 2, 4, 6, 8, 15, 13]
            \item путь 5 -> 14: [5, 7, 14]
            \item путь 5 -> 15: [5, 3, 1, 0, 2, 4, 6, 8, 15]
        \end{itemize}
        \item Начальный узел $ 12 $
        \begin{itemize}
            \item путь 12 -> 0: [12, 14, 7, 5, 3, 1, 0]
            \item путь 12 -> 1: [12, 14, 7, 5, 3, 1]
            \item путь 12 -> 2: [12, 14, 7, 5, 3, 1, 0, 2]
            \item путь 12 -> 3: [12, 14, 7, 5, 3]
            \item путь 12 -> 4: [12, 14, 7, 5, 3, 1, 0, 2, 4]
            \item путь 12 -> 5: [12, 14, 7, 5]
            \item путь 12 -> 6: [12, 14, 7, 5, 3, 1, 0, 2, 4, 6]
            \item путь 12 -> 7: [12, 14, 7]
            \item путь 12 -> 8: [12, 14, 7, 5, 3, 1, 0, 2, 4, 6, 8]
            \item путь 12 -> 9: [12, 10, 9]
            \item путь 12 -> 10: [12, 10]
            \item путь 12 -> 11: []
            \item путь 12 -> 13: [12, 14, 7, 5, 3, 1, 0, 2, 4, 6, 8, 15, 13]
            \item путь 12 -> 14: [12, 14]
            \item путь 12 -> 15: [12, 14, 7, 5, 3, 1, 0, 2, 4, 6, 8, 15]
        \end{itemize}
    \end{itemize}

    Узлы сети со звёздной топологией и центральным узлом $ 0 $ имеют следующее расположение.
    \plot{full_star_points}{Расположение узлов сети с звёздной топологией}{p:fullStarPoints}

    Граф для данной сети имеет вид.
    \plot{full_star}{Граф сети с звёздной топологией}{p:fullStar}

    Некоторые примеры кратчайший путей (подробнее \textsl{2\_lab/results/star\_full.txt}).
    \begin{itemize}
        \item Начальный узел $ 0 $
        \begin{itemize}
            \item путь 0 -> 1: [0, 1]
            \item путь 0 -> 2: [0, 2]
            \item путь 0 -> 3: [0, 3]
            \item путь 0 -> 4: [0, 4]
            \item путь 0 -> 5: [0, 5]
            \item путь 0 -> 6: [0, 6]
            \item путь 0 -> 7: [0, 7]
            \item путь 0 -> 8: [0, 8]
        \end{itemize}
        \item Начальный узел $ 7 $
        \begin{itemize}
            \item путь 7 -> 0: [7, 0]
            \item путь 7 -> 1: [7, 0, 1]
            \item путь 7 -> 2: [7, 0, 2]
            \item путь 7 -> 3: [7, 0, 3]
            \item путь 7 -> 4: [7, 0, 4]
            \item путь 7 -> 5: [7, 0, 5]
            \item путь 7 -> 6: [7, 0, 6]
            \item путь 7 -> 8: [7, 0, 8]
        \end{itemize}
    \end{itemize}

    После удаления центрального узла $ 0 $ граф сети имеет вид.
    \plot{rm_star}{Граф сети с звёздной топологией без центрального узла $ 0 $}{p:rmStar}

    Путей для тех же пар узлов (подробнее \textsl{2\_lab/results/star\_remove.txt})
    не будет существовать.

    \section{Заключение}\label{sec:4}
    Из анализа результатов становится ясно, что сеть с линейной топологией особенно подвержена влиянию потерь узлов: исчезновение одного узла приводит к появлению узлов, до которых невозможно достучаться.
    Сеть с кольцевой топологией более устойчива к потере узлов; при пропаже одного из них она преобразуется в сеть линейного типа. Сеть с звездной топологией наиболее устойчива к потерям узлов, за исключением случаев, когда теряется центральный узел. При этом каждая пара остальных узлов становится недоступной друг для друга.

\end{document}